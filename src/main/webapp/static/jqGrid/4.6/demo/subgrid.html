<%@ page contentType="text/html;charset=UTF-8" %>
<%@ include file="/jsp/include/taglib.jsp"%>
<html>
<head>
	<title>鎸囨爣浠诲姟鏌ヨ</title>
	<meta name="decorator" content="default"/>
	<style type="text/css">
		.searchDiv {background-image: url(${ctxStatic}/images/railline.png);height:28px;background-repeat:no-repeat;}
		.searchText {color:white;font-size:14px;padding:3px 10px;}
		.breadcrumb {padding:2px 15px;margin-bottom:3px;}
	</style>
	<link href="${ctxStatic}/jqGrid/4.6/css/ui.jqgrid.css" rel="stylesheet"/>
	<script src="${ctxStatic}/jqGrid/4.6/js/jquery.jqGrid.js" type="text/javascript"></script>
	<script src="${ctxStatic}/jqGrid/4.6/js/jquery.jqGrid.extend.js" type="text/javascript"></script>
	<script type="text/javascript">
	var dataGrid, dataGrids = {}; // 瀹氫箟鍏ㄥ眬琛ㄦ牸瀵硅薄銆�	$(document).ready(function() {
		
		// 鍒濆鍖朌ataGrid瀵硅薄
		dataGrid = new DataGrid({
			
			// 褰撳墠椤电缂栧彿
			tabPageId: '${param.tabPageId}',
			
			// 璁剧疆鏁版嵁琛ㄦ牸鍒�			columnModel: [
	  			{header:'缁╂晥鍐呭', name:'jxnr', width:150},
				{header:'涓�骇鎸囨爣', name:'yjzb', width:150},
				{header:'浜岀骇鎸囨爣', name:'ejzb', width:150},
				{header:'涓夌骇鎸囨爣', name:'sjzb', width:150},
				{header:'鍒嗗�', name:'fz', width:150},
				{header:'鎿嶄綔', name:'actions', width:80, fixed:true, sortable:false, resizable:false, fixed:true, formatter: function(val, obj, row, act){
					var actions = [];
					actions.push('<a href="${ctx}?'+row.id+'" class="btnList" title="鏌ョ湅"><i class="fa fa-pencil"></i></a>&nbsp;');
					return actions.join('');
				}}
			],
			showRownum: false,
			sortable: false,
			autoGridWidthFix: 2,
			subGrid: true,
			subGridRowExpanded: function(subgrid_id, row_id) {
				var subgrid_table_id = subgrid_id+"_t", subgrid_pager_id = "p_"+subgrid_table_id;
				$("#"+subgrid_id).html("<table id='"+subgrid_table_id+"'></table><div id='"+subgrid_pager_id+"' class='pagination'></div>");
				$("#sjzbId").val(row_id);
				// 鍒濆鍖朌ataGrid瀵硅薄
				var dataGrid = new DataGrid({

					dataGrid: $("#"+subgrid_table_id),
					dataGridPage: $("#"+subgrid_pager_id),
					searchForm: $("#"+"searchForm2"),
					
					// 褰撳墠椤电缂栧彿
					tabPageId: '${param.tabPageId}',
					
					// 璁剧疆鏁版嵁琛ㄦ牸鍒�					columnModel: [
						{header:'鎸囨爣鍚嶇О', name:'zbmc', width:150},
						{header:'鎸囨爣灞炴�', name:'zbsx', width:150},
						{header:'鑰冭瘎鍛ㄦ湡', name:'kpzq', width:150},
						{header:'鍒嗗�', name:'fz', width:150},
						{header:'鎿嶄綔', name:'actions', width:80, fixed:true, sortable:false, resizable:false, fixed:true, formatter: function(val, obj, row, act){
							var actions = [];
							actions.push('<a href="${ctx}?'+row.id+'" class="btnList" title="鏌ョ湅"><i class="fa fa-pencil"></i></a>&nbsp;');
							return actions.join('');
						}}
					],
					showRownum: false,
					sortable: false,
					height: "100%",
					autoGridHeight: false,
					autoGridWidthFix: 55,
					subGrid: true,
					subGridRowExpanded: function(subgrid_id, row_id) {
						var subgrid_table_id = subgrid_id+"_t", subgrid_pager_id = "p_"+subgrid_table_id;
						$("#"+subgrid_id).html("<table id='"+subgrid_table_id+"'></table><div id='"+subgrid_pager_id+"' class='pagination'></div>");
						$("#sjzbId3").val(row_id);
						// 鍒濆鍖朌ataGrid瀵硅薄
						var dataGrid = new DataGrid({

							dataGrid: $("#"+subgrid_table_id),
							dataGridPage: $("#"+subgrid_pager_id),
							searchForm: $("#"+"searchForm3"),
							
							// 褰撳墠椤电缂栧彿
							tabPageId: '${param.tabPageId}',
							
							// 璁剧疆鏁版嵁琛ㄦ牸鍒�							columnModel: [
								{header:'鎸囨爣鍚嶇О', name:'zbmc', width:150},
								{header:'鎸囨爣灞炴�', name:'zbsx', width:150},
								{header:'鑰冭瘎鍛ㄦ湡', name:'kpzq', width:150},
								{header:'鍒嗗�', name:'fz', width:150},
								{header:'鎿嶄綔', name:'actions', width:80, fixed:true, sortable:false, resizable:false, fixed:true, formatter: function(val, obj, row, act){
									var actions = [];
									actions.push('<a href="${ctx}?'+row.id+'" class="btnList" title="鏌ョ湅"><i class="fa fa-pencil"></i></a>&nbsp;');
									return actions.join('');
								}}
							],
							showRownum: false,
							sortable: false,
							height: "100%",
							autoGridHeight: false,
							autoGridWidthFix: 88,
							subGrid: true,
							subGridRowExpanded: function(subgrid_id, row_id) {
								var subgrid_table_id = subgrid_id+"_t", subgrid_pager_id = "p_"+subgrid_table_id;
								$("#"+subgrid_id).html("<table id='"+subgrid_table_id+"'></table><div id='"+subgrid_pager_id+"' class='pagination'></div>");
								$("#sjzbId4").val(row_id);
								// 鍒濆鍖朌ataGrid瀵硅薄
								var dataGrid = new DataGrid({

									dataGrid: $("#"+subgrid_table_id),
									dataGridPage: $("#"+subgrid_pager_id),
									searchForm: $("#"+"searchForm4"),
									
									// 褰撳墠椤电缂栧彿
									tabPageId: '${param.tabPageId}',
									
									// 璁剧疆鏁版嵁琛ㄦ牸鍒�									columnModel: [
										{header:'鎸囨爣鍚嶇О', name:'zbmc', width:150},
										{header:'鎸囨爣灞炴�', name:'zbsx', width:150},
										{header:'鑰冭瘎鍛ㄦ湡', name:'kpzq', width:150},
										{header:'鍒嗗�', name:'fz', width:150},
										{header:'鎿嶄綔', name:'actions', width:80, fixed:true, sortable:false, resizable:false, fixed:true, formatter: function(val, obj, row, act){
											var actions = [];
											actions.push('<a href="${ctx}?'+row.id+'" class="btnList" title="鏌ョ湅"><i class="fa fa-pencil"></i></a>&nbsp;');
											return actions.join('');
										}}
									],
									showRownum: false,
									sortable: false,
									height: "100%",
									autoGridHeight: false,
									autoGridWidthFix: 120,
									ajaxSuccess: function(data){ // 鍔犺浇鎴愬姛鍚庢墽琛屾柟娉�										
									}
								});
								dataGrids[row_id] = dataGrid;
							},
							subGridRowColapsed: function(subgrid_id, row_id) {
								
							},
							ajaxSuccess: function(data){ // 鍔犺浇鎴愬姛鍚庢墽琛屾柟娉�								
							}
						});
						dataGrids[row_id] = dataGrid;
					},
					subGridRowColapsed: function(subgrid_id, row_id) {
						
					},
					ajaxSuccess: function(data){ // 鍔犺浇鎴愬姛鍚庢墽琛屾柟娉�						$(window).resize();
					}
				});
				dataGrids[row_id] = dataGrid;
			},
			subGridRowColapsed: function(subgrid_id, row_id) {
				
			},
			ajaxSuccess: function(data){ // 鍔犺浇鎴愬姛鍚庢墽琛屾柟娉�				
			}
		});
		
	});
	</script>
</head>
<body>
	<div class="searchDiv"><div class="searchText">鏌ヨ鏉′欢</div></div>
	<form:form id="searchForm" modelAttribute="jxjhGcglTask" action="${ctx}/jxjh/zbfpSjzb/listData" method="post" class="breadcrumb form-search"
		data-page-no="${page.pageNo}" data-page-size="${page.pageSize}" data-order-by="${page.orderBy}">
		<ul class="ul-form">	
			<li><label>鐘舵�锛�/label>
				<form:select id="status" path="status" class="input-medium">
					<form:option value=" " label=""/>
					<form:options items="${fns:getDictList('jxkh_task_status')}" itemLabel="label" itemValue="value" htmlEscape="false"/>
				</form:select>
			</li>
			<li>
				<label></label>
				<input id="btnSubmit" class="btn btn-primary" type="submit" value="鏌ヨ"/>
			</li>
			<li>
				<label></label>
				<input id="btnSubmit" class="btn btn-primary" type="button" value="瀵煎嚭鍏ㄩ儴"/>
			</li>
		</ul>
	</form:form>
	<form:form id="searchForm2" modelAttribute="jxjhGcglTask" action="${ctx}/sjzbfj/jxJxjhQjzb/sjzbfj/listData" method="post"
		class="breadcrumb form-search hide" data-page-no="${page.pageNo}" data-page-size="${page.pageSize}" data-order-by="${page.orderBy}">
		<input type="hidden" id="sjzbId" name="sjzbId">
	</form:form>
	<form:form id="searchForm3" modelAttribute="jxjhGcglTask" action="${ctx}/sjzbfj/jxJxjhQjzb/sjzbfj/listData" method="post"
		class="breadcrumb form-search hide" data-page-no="${page.pageNo}" data-page-size="${page.pageSize}" data-order-by="${page.orderBy}">
		<input type="hidden" id="sjzbId3" name="sjzbId">
	</form:form>
	<form:form id="searchForm4" modelAttribute="jxjhGcglTask" action="${ctx}/sjzbfj/jxJxjhQjzb/sjzbfj/listData" method="post"
		class="breadcrumb form-search hide" data-page-no="${page.pageNo}" data-page-size="${page.pageSize}" data-order-by="${page.orderBy}">
		<input type="hidden" id="sjzbId4" name="sjzbId">
	</form:form>
	<sys:message content="${message}"/>
	<div class="searchDiv"><div class="searchText">鍒楄〃</div></div>
	<table id="dataGrid"></table>
    <div id="dataGridPage" class="pagination"></div>
</body>
</html>